{
	"version": "2.0.0",
	"tasks": [
		{
			"label": "Install CLI tools + Python deps",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"./install.sh"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-ExecutionPolicy",
					"Bypass",
					"-File",
					"install.ps1"
				]
			},
			"isBackground": false
		},
		{
			"label": "Check GitHub CLI auth",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"command -v gh >/dev/null 2>&1 || { echo 'gh not found. Run the Install CLI tools + Python deps task.'; exit 1; }; gh auth status"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					"if (-not (Get-Command gh -ErrorAction SilentlyContinue)) { Write-Error 'gh not found. Run the Install CLI tools + Python deps task.'; exit 1 }; gh auth status"
				]
			},
			"isBackground": false
		},
		{
			"label": "Generate timestamps report",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.github_analytics --skip-file-modifications --skip-commit-stats"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.github_analytics --skip-file-modifications --skip-commit-stats"
				]
			},
			"isBackground": false
		},
		{
			"label": "Generate timestamps report (full)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.github_analytics"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.github_analytics"
				]
			},
			"isBackground": false
		},
		{
			"label": "Generate timestamps report (owned only)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.github_analytics --skip-file-modifications --skip-commit-stats"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.github_analytics --skip-file-modifications --skip-commit-stats"
				]
			},
			"isBackground": false
		},
		{
			"label": "Generate timestamps report (owned only, filtered commits)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.github_analytics --skip-file-modifications --skip-commit-stats"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.github_analytics --skip-file-modifications --skip-commit-stats"
				]
			},
			"isBackground": false
		},
		{
			"label": "Clone and analyze with file timestamps",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze --cleanup"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze --cleanup"
				]
			},
			"isBackground": false
		},
		{
			"label": "Clone and analyze with file timestamps (venv)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze --cleanup"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze --cleanup"
				]
			},
			"isBackground": false
		},
		{
			"label": "Check file events sheet",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"./.venv/bin/python -c \"import pathlib, pandas as pd; base=pathlib.Path(r'${workspaceFolder}')/'data_reports'; files=sorted(base.glob('**/*.xlsx'), key=lambda p: p.stat().st_mtime, reverse=True); p=files[0]; print('Latest:', p); xls=pd.ExcelFile(p); print(xls.sheet_names)\""
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -c \"import pathlib, pandas as pd; base=pathlib.Path(r'${env:WORKSPACEFOLDER}')/'data_reports'; files=sorted(base.glob('**/*.xlsx'), key=lambda p: p.stat().st_mtime, reverse=True); p=files[0]; print('Latest:', p); xls=pd.ExcelFile(p); print(xls.sheet_names)\""
				]
			},
			"isBackground": false
		},
		{
			"label": "Write sheet names",
			"type": "shell",
			"command": "bash",
			"args": [
				"-lc",
				"./.venv/bin/python -c \"import pathlib, pandas as pd; base=pathlib.Path(r'${workspaceFolder}')/'data_reports'; files=sorted(base.glob('**/*.xlsx'), key=lambda p: p.stat().st_mtime, reverse=True); p=files[0]; xls=pd.ExcelFile(p); out=p.parent/'sheet_names.txt'; out.write_text('\\n'.join(xls.sheet_names), encoding='utf-8'); print('Wrote:', out)\""
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -c \"import pathlib, pandas as pd; base=pathlib.Path(r'${env:WORKSPACEFOLDER}')/'data_reports'; files=sorted(base.glob('**/*.xlsx'), key=lambda p: p.stat().st_mtime, reverse=True); p=files[0]; xls=pd.ExcelFile(p); out=p.parent/'sheet_names.txt'; out.write_text('\\n'.join(xls.sheet_names), encoding='utf-8'); print('Wrote:', out)\""
				]
			},
			"isBackground": false
		},
		{
			"label": "Clone and analyze with file timestamps (fixed args)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze --cleanup"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze --cleanup"
				]
			},
			"isBackground": false
		},
		{
			"label": "Clone and analyze with file timestamps (final)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze --cleanup"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze --cleanup"
				]
			},
			"isBackground": false
		},
		{
			"label": "Rerun timestamp report (git file timestamps)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze --cleanup"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze --cleanup"
				]
			},
			"isBackground": false
		},
		{
			"label": "Clone and analyze with file timestamps (rerun)",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze --cleanup"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze --cleanup"
				]
			},
			"isBackground": false
		},
		{
			"label": "Clone and analyze cached repos",
			"type": "shell",
			"command": "bash",
			"dependsOn": ["Check GitHub CLI auth"],
			"args": [
				"-lc",
				"./.venv/bin/python -m github_analyitics.reporting.clone_and_analyze"
			],
			"windows": {
				"command": "pwsh",
				"args": [
					"-NoProfile",
					"-Command",
					".\\.venv\\Scripts\\python.exe -m github_analyitics.reporting.clone_and_analyze"
				]
			},
			"isBackground": true,
			"problemMatcher": [],
			"group": ""
		}
	]
}